<html>
<head>

<meta charset="UTF-8">
<meta property="og:image" content="dacic_thumb.jpg" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://gdejedacic.com" />
<meta property="og:title" content="Gde je Dačić?" />
<meta property="og:description" content="Gde je Dačić danas?" />

<style>
body {
  background-color: white;
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center center;
}

#locator {
  background-color: black;
  color: white;
  text-align: center;
  width: 100%;
  height: 100%;
  font-size: 4vw;
}

#today {
  background-color: rgba(0.2, 0.5, 0.9, 0.3);
  display: none;
  font-size: 3vw;
  color: #fff;
}

#dacic  {
  display: none;
  width: 100%;
  text-align: center;
}
</style>

</head>

<body>
<div id="locator">Lociram Dačića...</div>
<div id="today"></div>
<div id="dacic"><img src="dacic.png" /></div>

<script>
var httpRequest = new XMLHttpRequest();
var dacicLocation = "";
const prefix = "Dačić je danas ";
const url = "locations.txt";

var reload = function() { 
  var locations = dacicLocation.split("\n");
  var numberOfLocations = locations.length - 1;

  /*
  var now = new Date();
  var start = new Date(now.getFullYear(), 0, 0);
  var diff = now - start;
  var oneDay = 1000 * 60 * 60 * 24;
  var day = Math.floor(diff / oneDay) + 1;
  var locationOfTheDay = day % numberOfLocations;
  */

  var locationOfTheDay = Math.floor(Math.random() * numberOfLocations);
  var imageOfTheDay = "locations/" + locationOfTheDay + ".jpg";

  document.body.style.backgroundImage = "url(" + imageOfTheDay + ")";

  document.getElementById("locator").style.display = "none";
  document.getElementById("today").innerHTML = prefix + locations[locationOfTheDay];
  document.getElementById("today").style.display = "block";
  document.getElementById("dacic").style.display = "block";

};

httpRequest.open("GET", url);
httpRequest.onreadystatechange = (e) => {
  if (httpRequest.readyState === httpRequest.DONE) {
    if (httpRequest.status === 200) {
      console.log(httpRequest.responseText);
      dacicLocation = httpRequest.responseText;
      setTimeout(reload, 5000);
    }
  }
}
httpRequest.send();


</script>
</body>
</html>
